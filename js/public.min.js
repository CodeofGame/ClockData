/*! 鍓嶇js鏂囦欢鍘嬬缉 */
$.getScript = function(url, callback) {
	$.ajax({
		type: "GET",
		url: url,
		async: !1,
		success: callback,
		dataType: "script",
		ifModified: !0,
		cache: !0
	})
}, window.wdl = window.wdl || {
	version: "beta 0.1"
}, wdl.utils = wdl.utils || {}, wdl.mobileapi = wdl.mobileapi || {};
var URL = {
		json: "http://cdnjs.cloudflare.com/ajax/libs/json3/3.3.2/json3.min.js",
		amap: "http://webapi.amap.com/maps?v=1.3&key=c6122ad7199a3589ceeffcba3772a511",
		wechat_api: "http://res.wx.qq.com/open/js/jweixin-1.0.0.js",
		kingdee_api: "http://do.yunzhijia.com/pub/js/qingjs.js"
	},
	cacheRelative = {
		basic: "Basic",
		authorization: "Authorization",
		token: "X-Auth-Token",
		token_encode: "X-Auth-Token-Encode",
		userid: "X-Userid",
		username: "X-Username",
		userpwd: "X-Password",
		userrole: "role",
		tokenTime: "_tokenTime",
		internal: "message",
		referrer: "referrer",
		quitsecond: 3e3,
		tokenExpires: 12e5,
		pending_confirm: 15,
		pending_kypay_confirmed: 23
	},
	sysConfig = {
		isDev: !1,
		testLocation: {
			lat: "116.256695",
			lng: "39.976998"
		},
		getLocationTimeOut: 5e3
	};
! function() {
	_string = {}, _string.trim = function(s) {
		return s.replace(/(^\s*)|(\s*$)/g, "")
	}, _string.trimLeft = function(s) {
		return s.replace(/^\s*/, "")
	}, _string.trimRight = function(s) {
		return s.replace(/\s*$/, "")
	}, _string.formateMoney = function(string, separator) {
		return separator || (separator = ","), "number" == typeof string && (string += ""), string.replace(/\b\d+\b/, function(str) {
			var len = str.length,
				miu = Math.floor((len % 3 === 0 ? len - 1 : len) / 3);
			if(len < 4) return str;
			str = str.split("");
			for(var i = 1, j = 0; i <= miu; i++, j++) str.splice(len - 3 * i - j, 0, separator), len++;
			return str.join("")
		})
	}, _string.unformateMoney = function(string, separator) {
		return separator || (separator = ","), string.split(separator).join("")
	}, _string.isNotNullOrEmpty = function(s) {
		return s = _string.trim(s), null != s && s.length > 0
	}, _string.equalsIgnoreCase = function(s1, s2) {
		return s1.toUpperCase() == s2.toUpperCase()
	}, _string.isChinese = function(s) {
		return /^[\u4E00-\uFA29]*$/.test(s) && !/^[\uE7C7-\uE7F3]*$/.test(s.replace(/(^\s*)|(\s*$)/g, ""))
	}, _string.isEmail = function(s) {
		return null != /^(\w)+(\.\w+)*@(\w)+((\.\w{2,3}){1,3})$/i.exec(s)
	}, _string.isPost = function(s) {
		return /^\d{6}$/.test(s)
	}, _string.isImg = function(s) {
		return new RegExp("[.]+(jpg|jpeg|png|bmp|gif)$", "gi").test(s)
	}, _string.mobileSafe = function(mobile) {
		return _string.isMobile(mobile) ? mobile.replace(/(\d{3})\d{4}(\d{4})/, "$1****$2") : "鎵嬫満鍙锋牸寮忎笉姝ｇ‘"
	}, _string.isMobile = function(mobile) {
		return /^1[3|4|5|7|8][0-9]\d{8}$/.test(mobile)
	}, _string.isgtzero = function(num) {
		return /^(([1-9]\d*(.\d{1,2})?)|(0.[1-9]\d?)|(0.0[1-9]))$/.test(num)
	}, _string.isPositiveInteger = function(num) {
		return /^[1-9]\d*$/.test(num)
	}, _string.isIdCard = function(num) {
		return /^[1-9]((\d{14})|(\d{16}(\d|X|x)))$/.test(num)
	}, _string.hasNoSpecial = function(str) {
		return /^[a-zA-Z0-9\u4E00-\u9FA5]+$/.test(str)
	}, _string.dealMobile = function(str) {
		return "number" == typeof str && (str += ""), str.replace(/(\d{3})\d{4}(\d{4})/, "$1****$2")
	}, _string.dealIDCard = function(str) {
		"number" == typeof str && (str += "");
		var s;
		return s = 18 === str.length ? str.replace(/(\d{3})\d{12}(\d{3})/, "$1************$2") : str.replace(/(\d{3})\d{9}(\d{3})/, "$1*********$2")
	}, _string.getUrlQueryName = function(name) {
		var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i"),
			r = location.search.substr(1).match(reg);
		return null != r ? unescape(r[2]) : null
	}, _string.timeFormate2Number = function(time, seperator) {
		var str, arr, newTime;
		return seperator || (seperator = "-"), str = time.replace(/:/g, seperator), str = str.replace(/ /g, seperator), arr = str.split(seperator), newTime = new Date(Date.UTC(arr[0], arr[1] - 1, arr[2], arr[3] - 8, arr[4], arr[5])), newTime.getTime()
	}, _string.timeNumber2Formate = function(time, seperator) {
		var str, first, second, arr;
		return seperator || (seperator = "-"), "string" == typeof time && (time = parseInt(time, 10)), str = new Date(time), first = str.toLocaleDateString().replace(/\//g, seperator), second = str.toLocaleTimeString(), second.indexOf("涓婂崍") >= 0 && (arr = second.replace("涓婂崍", "").split(":"), parseInt(arr[0], 10) < 10 && (arr[0] = "0" + arr[0]), second = arr.join(":")), second.indexOf("涓嬪崍") >= 0 && (arr = second.replace("涓嬪崍", "").split(":"), arr[0] = parseInt(arr[0], 10) + 12, arr[0] += "", second = arr.join(":")), first + " " + second
	}, _string.hasTimeInterleaving = function(begin1, end1, begin2, end2) {
		var begin1Time = 60 * parseInt(begin1.split(":")[0]) + parseInt(begin1.split(":")[1]),
			end1Time = 60 * parseInt(end1.split(":")[0]) + parseInt(end1.split(":")[1]),
			begin2Time = 60 * parseInt(begin2.split(":")[0]) + parseInt(begin2.split(":")[1]),
			end2Time = 60 * parseInt(end2.split(":")[0]) + parseInt(end2.split(":")[1]);
		return end1Time += end1Time < begin1Time ? 1440 : 0, end2Time += end2Time < begin2Time ? 1440 : 0, begin1Time > begin2Time && begin1Time < end2Time || end1Time > begin2Time && end1Time < end2Time || begin2Time > begin1Time && begin2Time < end1Time || end2Time > begin1Time && end2Time < end1Time
	}, wdl.utils.string = wdl.utils.string || _string
}(),
function() {
	_object = {}, _object.isType = function(type) {
		return function(obj) {
			return {}.toString.call(obj) == "[object " + type + "]"
		}
	}, _object.objIsNull = function(obj) {
		for(var i in obj) return !1;
		return !0
	}, _object.buildPageParameter = function(pageNum, pageSize) {
		return "&_hidden_currentPageNumber=" + pageNum + "&pageMaxSize=" + pageSize
	}, _object.getUrlParam = function(name) {
		var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i"),
			r = window.location.search.substr(1).match(reg);
		return null != r ? unescape(r[2]) : null
	}, _object.trim = function(name) {
		return name.replace(/(^\s*)|(\s*$)/g, "")
	}, _object.formatTime = function(time) {
		return 5 == time.length ? time + ":00" : time
	}, _object.convertImgToBase64 = function(img, callback, outputFormat) {
		var canvas = document.createElement("CANVAS"),
			ctx = canvas.getContext("2d");
		img.crossOrigin = "Anonymous", img.onload = function() {
			canvas.height = img.height, canvas.width = img.width, ctx.drawImage(img, 0, 0);
			var dataURL = canvas.toDataURL(outputFormat || "image/png");
			canvas = null, callback.call(null, {
				imageData: dataURL.split(",")[1],
				width: img.width,
				height: img.height
			})
		}
	}, _object.getFlatternDistance = function(lat1, lng1, lat2, lng2) {
		if(lat1 == lat2 && lng1 == lng2) return 0;
		var lat1 = parseFloat(lat1),
			lng1 = parseFloat(lng1),
			lat2 = parseFloat(lat2),
			lng2 = parseFloat(lng2),
			b = Math.PI / 180,
			c = Math.sin((lng1 - lng2) * b / 2),
			d = Math.sin((lat1 - lat2) * b / 2),
			a = c * c + d * d * Math.cos(lng2 * b) * Math.cos(lng1 * b);
		return 12756274 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a))
	}, _object.parse = function(str) {
		return "undefined" == typeof str ? {} : str ? "object" == typeof str ? str : 0 == str.indexOf("[") ? eval(str) : eval("(" + str + ")") : {}
	}, wdl.utils.isObject = _object.isType("Object"), wdl.utils.isString = _object.isType("String"), wdl.utils.isArray = Array.isArray || _object.isType("Array"), wdl.utils.isFunction = _object.isType("Function"), wdl.utils.isNumber = _object.isType("Number"), wdl.utils.objIsNull = _object.objIsNull, wdl.utils.buildPageParameter = _object.buildPageParameter, wdl.utils.getUrlParam = _object.getUrlParam, wdl.utils.trim = _object.trim, wdl.utils.getFlatternDistance = _object.getFlatternDistance, wdl.utils.formatTime = _object.formatTime, wdl.utils.parse = _object.parse
}(),
function() {
	cookie = {}, cookie.set = function(key, value, expires) {
		var date = new Date,
			s = "https:" === location.protocol ? "; secure" : "",
			day = /^[1-9]([0-9]+)?d$/.test(expires),
			hour = /^[1-9]([0-9]+)?h$/.test(expires),
			second = /^[1-9]([0-9]+)?s$/.test(expires);
		return expires && (day || hour || second) ? (expires = parseInt(expires.substr(0, expires.length - 1), 10), day ? date.setDate(date.getDate() + expires) : hour ? date.setHours(date.getHours() + expires) : second && date.setSeconds(date.getSeconds() + expires), expires = "; expires=" + date.toGMTString()) : expires = "", document.cookie = [key, "=", value ? encodeURIComponent(value.toString()) : "", expires, "; path=/", "; domain=." + document.domain, s].join("")
	}, cookie.get = function(key) {
		var value;
		return(value = new RegExp("(?:^|; )" + key + "=([^;]*)").exec(document.cookie)) ? value[1] : null
	}, cookie.del = function(key) {
		if(!key) return !1;
		var val = cookie.get(key);
		null != val && cookie.set(key, val, -1)
	}, wdl.utils.cookie = cookie
}(),
function() {
	_sessionStorage = {}, _sessionStorage.set = function(key, value, expires) {
		return sessionStorage.setItem(key, value), !0
	}, _sessionStorage.get = function(key) {
		return sessionStorage.getItem(key)
	}, _sessionStorage.del = function(key) {
		return sessionStorage.removeItem(key), !0
	}, wdl.utils.sessionStorage = _sessionStorage
}(),
function() {
	_localStorage = {}, _localStorage.set = function(key, value, expires) {
		return localStorage.setItem(key, value), !0
	}, _localStorage.get = function(key) {
		return localStorage.getItem(key)
	}, _localStorage.del = function(key) {
		return localStorage.removeItem(key), !0
	}, wdl.utils.localStorage = _localStorage
}(),
function() {
	window.JSON || $("head").append('<script src="' + URL.json + '"></script>'), ajax = {}, ajax.settings = {
		url: "",
		type: "GET",
		dataType: "json",
		data: {},
		timeout: 1e4,
		async: !0,
		success: function() {},
		error: function() {},
		complete: function() {},
		beforeSend: function() {},
		defaultTimeoutHandler: !1
	}, ajax.send = function(options) {
		var settings, contentType, data, options = options || {};
		$.extend(ajax.settings, options), settings = ajax.settings, wdl.utils.objIsNull(settings.data) ? (contentType = "application/x-www-form-urlencoded; charset=UTF-8", data = null) : (contentType = "application/json; charset=UTF-8", data = JSON.stringify(settings.data)), $.ajax({
			url: settings.url,
			type: settings.type,
			dataType: settings.dataType,
			data: {
				oursData: data
			},
			timeout: settings.timeout,
			async: settings.async,
			beforeSend: function(request) {
				settings.beforeSend.call(null, request)
			},
			success: function(data) {
				if(settings.data = null, data = $.extend({
						msg: null,
						errcode: 0,
						success: !0
					}, data), data.success) {
					var result = null;
					if(data.msg) try {
						result = JSON.parse(data.msg)
					} catch(e) {
						result = data.msg
					}
					settings.success.call(null, result)
				} else alert(data.msg), settings.error.call(null, data)
			},
			error: function(data) {
				if(data.timeout = !1, 404 === data.status);
				else if(500 === data.status) data.responseJSON.length > 0 && alert(data.responseJSON[0].message);
				else if(401 === data.status);
				else if(0 === data.status && "timeout" === data.statusText && (data.timeout = !0, settings.defaultTimeoutHandler)) return alert("缃戠粶杩炴帴瓒呮椂,鍗冲皢鍒锋柊褰撳墠椤甸潰!"), void location.reload();
				settings.data = null, settings.error.call(null, data)
			},
			complete: function(response) {
				settings.complete.call(null, response)
			}
		})
	}, ajax.refreshToken = function() {
		alert("URL.freshToken")
	}, wdl.ajax = ajax.send
}(),
function() {
	window.JSON || $("head").append('<script src="' + URL.json + '"></script>'), ajaxform = {}, ajaxform.settings = {
		form: "",
		url: "",
		type: "GET",
		dataType: "json",
		data: {},
		async: !0,
		success: function() {},
		error: function() {},
		ajaxSetHeader: function() {},
		complete: function() {}
	}, ajaxform.send = function(options) {
		var settings, contentType, data, options = options || {};
		return $.extend(ajaxform.settings, options), settings = ajaxform.settings, eh.utils.objIsNull(settings.form) || "" == settings.form ? void console.log(consolelogText.nosuchdom) : (eh.utils.objIsNull(settings.data) ? (contentType = "application/x-www-form-urlencoded; charset=UTF-8", data = null) : (contentType = "application/json; charset=UTF-8", data = JSON.stringify(settings.data)), void $(settings.form).ajaxForm({
			url: settings.url,
			type: settings.type,
			dataType: settings.dataType,
			contentType: contentType,
			data: data,
			async: settings.async,
			beforeSend: function(request) {
				settings.ajaxSetHeader.call(null, request)
			},
			success: function(data) {
				settings.data = null, data = $.extend({
					status: 1,
					success: !0,
					data: {},
					message: "",
					entity: {},
					errors: []
				}, data), settings.success.call(null, data)
			},
			error: function(data) {
				404 === data.status && (location.href = "/404.html"), 500 === data.status && (data.responseJSON.length > 0 ? alert(data.responseJSON[0].message) : location.href = "/500.html"), 401 === data.status && (location.href = "/401.html"), settings.data = null, settings.error.call(null, data)
			},
			complete: function(response) {
				settings.data = null, settings.complete.call(null, response)
			}
		}))
	}, ajaxform.refreshToken = function() {
		alert("URL.freshToken")
	}, wdl.utils.ajaxform = ajaxform
}(),
function() {
	_service = {}, _service.indexData = {
		signStateObject: {
			"0-0": {
				name: "姝ｅ父绛惧埌",
				color: "#39ca74"
			},
			"1-0": {
				name: "姝ｅ父绛鹃€€",
				color: "#39ca74"
			},
			0: {
				name: "姝ｅ父",
				color: "#39ca74"
			},
			1: {
				name: "澶栧嫟",
				color: "#3498db"
			},
			2: {
				name: "璇峰亣",
				color: "#e74c3c"
			},
			3: {
				name: "鍑哄樊",
				color: "#29bb9c"
			},
			"-1": {
				name: "鏈",
				color: "#7f8c8d"
			},
			"0--1": {
				name: "鏈鍒�",
				color: "#7f8c8d"
			},
			"1--1": {
				name: "鏈閫€",
				color: "#7f8c8d"
			},
			"0--2": {
				name: "杩熷埌",
				color: "#e67e22"
			},
			"1--3": {
				name: "鏃╅€€",
				color: "#d15419"
			},
			"-2": {
				name: "杩熷埌",
				color: "#e67e22"
			},
			"-3": {
				name: "鏃╅€€",
				color: "#d15419"
			}
		}
	}, _service.platform = function() {
		var platform = wdl.utils.getUrlParam("platform");
		return platform ? wdl.utils.localStorage.set("platform", platform) : platform = wdl.utils.localStorage.get("platform"), platform || (platform = navigator.userAgent.toLowerCase().match(/qing\/.*;(iphone|android).*/) ? "enterpriseKdweibo" : "wechat"), platform
	}, _service.isEnterpriseWechat = function() {
		return "enterpriseWechat" == _service.platform()
	}, _service.isWechat = function() {
		return "wechat" == _service.platform()
	}, _service.isKingdee = function() {
		return "enterpriseKdweibo" == _service.platform()
	}, _service.roleTypIsAdmin = function(roleType) {
		return "" !== roleType
	}, _service.isAdmin = function() {
		var isadmin = wdl.utils.localStorage.get("isAdmin") || "";
		return _service.roleTypIsAdmin(isadmin)
	}, _service.roleTypIsDepartmentAdmin = function(roleType) {
		return "departmentMgr" == roleType
	}, _service.isDepartmentAdmin = function() {
		var isadmin = wdl.utils.localStorage.get("isAdmin") || "";
		return _service.roleTypIsDepartmentAdmin(isadmin)
	}, _service.roleTypIsSuperAdmin = function(roleType) {
		return "orgMgr" == roleType
	}, _service.isSuperAdmin = function() {
		var isadmin = wdl.utils.localStorage.get("isAdmin") || "";
		return _service.roleTypIsSuperAdmin(isadmin)
	}, _service.hasCompany = function() {
		return "true" === wdl.utils.localStorage.get("hasCompany")
	}, _service.getRole = function(roleType) {
		return "departmentMgr" == roleType ? {
			type: roleType,
			name: "閮ㄩ棬绠＄悊鍛�",
			isAdmin: !0,
			color: "#2cdd70"
		} : "orgMgr" == roleType ? {
			type: roleType,
			name: "瓒呯骇绠＄悊鍛�",
			isAdmin: !0,
			color: "#007aff"
		} : {
			type: roleType,
			name: "鍛樺伐",
			isAdmin: !1
		}
	}, _service.role = function() {
		var isadmin = wdl.utils.localStorage.get("isAdmin") || "";
		return _service.getRole(isadmin)
	}, _service.exitCompany = function() {
		wdl.utils.localStorage.set("hasCompany", !1), wdl.utils.localStorage.set("isAdmin", ""), wdl.utils.localStorage.del("checkID"), wdl.utils.localStorage.del("checkMod")
	}, _service.login = function(openId) {
		wdl.utils.cookie.set("client_open_id", openId)
	};
	var searchAddressBaiduOptions = null;
	_service.searchAddressBaidu = function(options) {
		options = $.extend({
			success: function() {},
			error: function() {}
		}, options), options.isSuccessCallback = !0, options.timeOut = setTimeout(function() {
			options.isSuccessCallback = !1, options.error.call(null, null)
		}, 5e3), searchAddressBaiduOptions = options, $.getScript("http://api.map.baidu.com/geocoder/v2/?ak=0YBnsv6r5yFiejUT0fGvmmMc&coordtype=gcj02ll&callback=wdl.utils.service.searchBaiduCallBack&location=" + options.lng + "," + options.lat + "&output=json&_=" + (new Date).getTime())
	}, _service.searchBaiduCallBack = function(data) {
		if(clearTimeout(searchAddressBaiduOptions.timeOut), searchAddressBaiduOptions.isSuccessCallback)
			if(0 == data.status) {
				var rr = {
					formatAddress: data.result.formatted_address + data.result.sematic_description,
					name: "",
					location: data.result.location,
					address: data.result.addressComponent.street + data.result.addressComponent.street_number,
					cityname: data.result.addressComponent.province,
					adname: data.result.addressComponent.district
				};
				searchAddressBaiduOptions.success.call(null, rr)
			} else searchAddressBaiduOptions.error.call(null, null)
	}, _service.searchAddress = function(options) {
		options = $.extend({
			success: function() {},
			error: function() {}
		}, options), "undefined" == typeof AMap ? $.getScript(URL.amap, function() {
			_service.aMapSearchAddress(options)
		}) : _service.aMapSearchAddress(options)
	}, _service.aMapSearchAddress = function(options) {
		var lnglatXY = new AMap.LngLat(options.lat, options.lng);
		AMap.service(["AMap.Geocoder"], function() {
			MGeocoder = new AMap.Geocoder({
				radius: 50,
				extensions: "all"
			}), MGeocoder.getAddress(lnglatXY, function(status, result) {
				if("complete" === status && "OK" === result.info) {
					var rr = {
						formatAddress: result.regeocode.formattedAddress,
						name: "",
						location: "",
						address: "",
						cityname: "",
						adname: "",
						poisAddresses: [],
						hasAddress: !1
					};
					AMap.service(["AMap.PlaceSearch"], function() {
						var placeSearch = new AMap.PlaceSearch({
							city: result.regeocode.addressComponent.citycode,
							pageSize: 10,
							type: "鍟嗗姟浣忓畢|鍏徃浼佷笟|椁愰ギ鏈嶅姟|椋庢櫙鍚嶈儨",
							extensions: "all",
							pageIndex: 1
						});
						placeSearch.searchNearBy("", lnglatXY, 500, function(status, result) {
							if("complete" === status && "OK" === result.info) {
								rr.poisAddresses = result.poiList.pois;
								for(var i = 0; i < rr.poisAddresses.length; i++) {
									rr.name = rr.poisAddresses[i].name, rr.location = {
										lng: rr.poisAddresses[i].location.lng,
										lat: rr.poisAddresses[i].location.lat
									}, rr.address = rr.poisAddresses[i].address, rr.cityname = rr.poisAddresses[i].cityname, rr.adname = rr.poisAddresses[i].adname, rr.formatAddress = rr.cityname + rr.adname + rr.address, rr.hasAddress = !0, options.success.call(null, rr);
									break
								}
							} else "no_data" === status ? options.success.call(null, rr) : options.error.call(null, result)
						})
					})
				} else alert("鏌ヨ鍦板潃澶辫触," + result), options.error.call(null, result)
			})
		})
	}, _service.isDev = function() {
		return sysConfig.isDev || null != wdl.utils.getUrlParam("isDev")
	}, _service.findSignStateObject = function(signType, signState) {
		return _service.indexData.signStateObject[signState]
	}, wdl.utils.service = _service
}(), wdl.utils.service.isDev() ? $.getScript("../js/public/mobileapi/test.js") : wdl.utils.service.isEnterpriseWechat() ? $.getScript("../js/public/mobileapi/wechat.js") : wdl.utils.service.isKingdee() ? $.getScript("../js/public/mobileapi/enterpriseKdweibo.js") : wdl.utils.service.isWechat() ? $.getScript("../js/public/mobileapi/wechat.js") : alert("鏈煡鐨勫钩鍙扮被鍨�!" + wdl.utils.service.platform());
/*! ours-wdl 鏈€鍚庝慨鏀逛簬锛� 2016-10-14 */